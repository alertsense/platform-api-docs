# Konexus.Directory.ApiClient - the C# library for the Public Directory API

This API will be used to allow Clients and Partners to create and manage UserProfiles including their contact information and notification preferences. UserProfiles are allowed to contain multiple Emails, Phones, and Locations (limited to 1 location for now).

Weather Preferences and the ability to define Channel Preferences from Group Memberships are not currently supported.

This C# Client is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech). See the [Instructions for generating](../../) the client again.

## Frameworks supported
- .NET Core >=1.0
- .NET Framework >=4.6
- Mono/Xamarin >=vNext

## Dependencies

- [Json.NET](https://www.nuget.org/packages/Newtonsoft.Json/) - 13.0.1 or later
- [JsonSubTypes](https://www.nuget.org/packages/JsonSubTypes/) - 1.8.0 or later
- [System.ComponentModel.Annotations](https://www.nuget.org/packages/System.ComponentModel.Annotations) - 5.0.0 or later

## Getting Started

```csharp
using System.Collections.Generic;
using System.Diagnostics;
using System.Net.Http;
using Konexus.Directory.ApiClient.Api;
using Konexus.Directory.ApiClient.Client;
using Konexus.Directory.ApiClient.Model;

namespace Example
{
    public class Example
    {
        public static void Main()
        {
            string baseApiUrl = "https://api-handweave.dev.alertsense.io";
            string authorityUrl = "https://auth.dev.alertsense.io";
            
            // create instances of HttpClient, HttpClientHandler to be reused later with different Api classes
            HttpClient httpClient = new HttpClient();
            HttpClientHandler httpClientHandler = new HttpClientHandler();

            // Create a Directory Client that wraps individual APIs and handles the client_credential flow Authentication
            DirectoryClient apiClient = new DirectoryClient(_apiBaseUrl, _httpClient, _httpClientHandler);

            string clientId = "XXXXXX";
            string clientSecret = "XXXXXXXXXXXXXXXXXXXXXXXX";

            // Authenticate the Directory client with the provided clientId and clientSecrets
            await apiClient.AuthenticateWithClientCredentialsAsync(authorityUrl, clientId, clientSecret);

            var apiInstance = new GroupsApi(httpClient, config, httpClientHandler);
            var tenantId = "3331";  // string | 
            var directoryId = "public";  // string | 

            try
            {
                // target user's email address
                string emailAddress = "test-user@nagdom.com";
                // Retrieve a UserProfile that belongs to a specific Tenant and Directory by the User's Identifier. 
                var findUsersResponse = await apiClient.UserApi.UserFindUsersByQueryAsync(tenantId, directoryId, new FindUserQuery(emailAddress));
                Debug.WriteLine($"Found: {findUsersResponse?.Items?.Count} users that match {emailAddress}");
            }
            catch (ApiException e)
            {
                Debug.Print("Exception when calling GroupsApi.GroupsDiscover: " + e.Message );
                Debug.Print("Status Code: "+ e.ErrorCode);
                Debug.Print(e.StackTrace);
            }

        }
    }
}
```
